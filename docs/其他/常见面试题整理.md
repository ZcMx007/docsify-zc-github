# 常见面试题整理

- 1、什么是TCP的三次握手，为什么不是两次或者四次？

TCP之所以需要三次握手是为了确认双端的收发能力是否正常。第一次握手client向server说明client的发送能力是正常的，第二次握手server向client端表明其收发能力都很正常，第三次握手client向server端说明client的接收能力也是正常的。此时client发送给server的消息就能被正常接收处理了。如果是两次握手的的话，则不能保证client端的接收能力是正常的，而一旦发生这种情况，仅仅两次握手会导致server端一直维持着这种无用的连接从而占用资源。如果是4次握手的话，则完全没有必要，反而徒增资源损耗。

- 2、TCP只需要三次握手即可建立连接，可为什么需要四次挥手才能断开连接？

第一次挥手由client向server端挥手，此时client会关闭自身的发送功能；服务端接收到该挥手消息后，由于可能还有未传输完的client信息在发送队列中，因此server向client挥第二次手，表示你要断开连接的请求我已经收到了，此时我已经关闭了我的接收功能，在我发送给你的消息完成发送后，我会再发消息给你确认，你此时只需要等着即可；server发送完了消息，然后向client发送了一条完成发送的确认消息后关闭了自身的发送能力，这是第三次挥手；4、client接收到server发送完成的确认消息，最后client关闭了自身的接收能力。

- 3、事务的四大隔离级别，七大传播特性

事务的ACID原则：原子性、一致性、隔离性、持久性

在并发下可能会出现以下3种问题：脏读（A读取时B回滚）、不可重复读（修改数据）、幻读（新增数据）,由此出现了四大隔离级别：1、**读-未提交**，这种隔离级别无法解决以上任意3种问题；2、**读-已提交/不可重复读**，此种隔离级别可以保证不会出现脏读，但不可重复读以及幻读无法解决；3、**可重复读**，除了脏读，都可以解决。4、**串行化**，都可以解决。随着隔离级别的增大，对于并发的效率而言是有很大影响的。例如**读-未提交/不可重复读**，将会在事务处理时使用行锁保证数据不会被脏读；**可重复读**情况下，如果检索条件存在索引则会使用next-key锁（范围锁，周边几行），如果检索条件的索引存在唯一性，则还会降级为行锁；但是在隔离级别是**串行化**时，就会在事务操作时锁住整张表避免幻读。

事务的七大传播特性：

PROPAGATION_REQUIRED
支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。

PROPAGATION_SUPPORTS
支持当前事务，如果当前没有事务，就以非事务方式执行。

PROPAGATION_MANDATORY
支持当前事务，如果当前没有事务，就抛出异常。

PROPAGATION_REQUIRES_NEW
新建事务，如果当前存在事务，把当前事务挂起。

PROPAGATION_NOT_SUPPORTED
以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。

PROPAGATION_NEVER
以非事务方式执行，如果当前存在事务，则抛出异常。

PROPAGATION_NESTED
如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则新建一个事务

- 4、项目中用到的技术栈介绍一下
- 5、做的自认为比较满意的点讲一讲？
- 6、如果这个方案让你重新设计，你怎么做？
- 7、Java集合类都有哪些？
- 8、ArrayList 和 LinkedList 区别？
- 9、HashMap 实现数据结构和扩容过程？
ArrayList 和 LinkedList 区别？ 你平常怎么选择？
异常类都有哪些？Exception 和 Error什么区别？
Synchronized 原理，锁膨胀过程 ？
Synchronized 和 reentrantlock 区别？
线程池原理是怎样的？
分布式事务一致性怎么实现？
消息乱序遇到过吗？ 怎么解决的？
ThreadLocal 用过吗？实现机制？
wait、sleep区别？
反射用过吗？什么原理？
动态代理了解吗？ cglib什么区别
单例模式了解吗？ 实现一个线程安全的单例模式？
无界队列和有界队列？
AQS 知道吗？
volatile了解吗？
实现一个生产者消费者例子
Java内存模型清楚吗？
遇到过线上性能问题吗？ 怎么排查的？
网络问题遇到过吗？TIME_WAIT和CLOSE_WAIT的区别
三次握手讲一讲
CountDownLatch、Seamphone、CyclicBarrier 都了解吗？
private、protected、public、关键字你平常怎么用的？
Java是值传递还是引用传递，写一段对象拷贝的代码
内存回收机制了解吗？
新生代和老生代区别？
垃圾回收器有哪几种? 你们生产环境用的哪种或哪几种？
Java线程和操作系统线程什么关系？
线程有几种状态，线程生命周期讲讲
MySQL 索引使用什么数据结构？为什么用 B+做索引？
什么是最左匹配原则？
在建表的时候如何设计所以的？有没有做过索引优化 ？
分库分表做了吗？ 怎么实现的？
MySQL 主从同步怎么做的？binlog清楚吗？
有没有做分库分表？怎么设计的？
用userId做的分库分表，现在需要用电话号码查询怎么办？
你们用的什么日志框架，log4j 和logback ？和slf4j什么区别？
redis 的String 是怎么实现的？ 为什么不直接用c的？
redis 是单线程的吗？ 为什么这么快？
redis 中有哪几种数据结构？分别代表什么
类加载机制了解吗？
什么是双亲委派模式
concurrenthashmap 什么原理？
Spring AOP与IOC的实现原理
Spring的BeanFactory和FactoryBean的区别
讲讲Spring中一个Bean的加载流程?
Spring的事务的隔离级别？
Autowired注解的原理？
用的什么rpc框架
幂等了解吗？ 你们系统怎么做幂等的
限流、熔断有了解吗？如何实现的
消息中间件如何解决消息丢失、消息乱序问题？
分布式事务保证一致性？
分布式锁的实现？
实现一个分布式自增id？
海量url怎么去重？
Redis有没有做持久化，怎么做的？
工作中用到了那些设计模式？
什么是一致性hash？
项目中用过什么设计模式？清楚模板方法、策略模式、责任链模式吗？
MySQL InnoDB存储的文件结构
讲讲乐观锁和悲观锁
cpu 100% 遇到过吗？ 怎么解决的
更新数据机制？ 先更新缓存还是DB？
缓存穿透、雪崩有了解吗
设计一个抢红包的程序?
Dp背包问题？
Minor GC 与 Full GC 分别在什么时候发生？
Java 类加载过程?
谈谈对Spring IOC和DI的理解？
你常用的git 命令？
线程调用start 和 run 什么区别？ 会有什么效果
中序遍历二叉树
之前项目遇到过什么挑战？
项目中你认为做的最有价值的功能？
父类和子类有同一个属性，实例化子类时是否会包含父类的属性？
有没有出现过Full Gc等问题？ 你是怎么排查的？
一般是怎么判断SQL 索引设置是否合理的？
什么是不可变对象？String 类为什么设计成不可变的？
抽象类和接口什么区别？你在做接口和类设计时如何选择？
HashMap的key 类型有什么要求？
写一个深度优先算法？
写快速排序 & 冒泡排序？
什么是用户空间和内核空间？有什么区别？
