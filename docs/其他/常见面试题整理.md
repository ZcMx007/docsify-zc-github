# 常见面试题整理

## 1、什么是TCP的三次握手，为什么不是两次或者四次？

TCP之所以需要三次握手是为了确认双端的收发能力是否正常。第一次握手client向server说明client的发送能力是正常的，第二次握手server向client端表明其收发能力都很正常，第三次握手client向server端说明client的接收能力也是正常的。此时client发送给server的消息就能被正常接收处理了。如果是两次握手的的话，则不能保证client端的接收能力是正常的，而一旦发生这种情况，仅仅两次握手会导致server端一直维持着这种无用的连接从而占用资源。如果是4次握手的话，则完全没有必要，反而徒增资源损耗。

## 2、TCP只需要三次握手即可建立连接，可为什么需要四次挥手才能断开连接？

第一次挥手由client向server端挥手，此时client会关闭自身的发送功能；服务端接收到该挥手消息后，由于可能还有未传输完的client信息在发送队列中，因此server向client挥第二次手，表示你要断开连接的请求我已经收到了，此时我已经关闭了我的接收功能，在我发送给你的消息完成发送后，我会再发消息给你确认，你此时只需要等着即可；server发送完了消息，然后向client发送了一条完成发送的确认消息后关闭了自身的发送能力，这是第三次挥手；4、client接收到server发送完成的确认消息，最后client关闭了自身的接收能力。

