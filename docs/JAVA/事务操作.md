# MYSQL 事务

## @Transactional 注解

spring中有一个极其重要的事务注解，那就是@Transactional，当方法上加了@Transactional注解，这个注解把当前方法中的作为一个事物，只有当方法都完成时，才会进行提交操作。

因此要想实时调用mapper的方法进行修改数据库，可以在mapper方法上加注解，开启新的事物，也就是
@Transactional(propagation= Propagation.REQUIRES_NEW) 表示在原有事务的基础上拓展新的事务（propagation：扩展，培养，传播）

同样有一点需要注意的是如果方法体中预先对可能出错的代码进行了try{}catch{}包裹处理，则一旦try执行的方法体中出错，由于没有抛出异常，因此无法被开启的事务捕获，自然也就无法进行回滚处理，此时如果需要回滚事务，则可以通过：
TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
手动回滚处理。
